<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Daily activity tracker</title>
    <style type="text/css">
        .ui-button.downshift{
            position: relative;
            left: 0px;
            bottom: -12px;
            margin-bottom: 5px;
        }
        .ui-widget.center {
            margin: auto;
            width: 50%;
            padding: 10px;
        }

    </style>
</h:head>

<h:body>
    <!-- ===================== TOOLBAR ====================== -->
    <p:toolbar style="width: 80%; margin: auto;">
        <p:toolbarGroup>
            <p:outputLabel value="Welcome, #{mainController.userData.name()} #{mainController.userData.surname()}"
                           style="font-weight:bold"/>
            <p:divider layout="vertical"/>
        </p:toolbarGroup>
        <p:toolbarGroup>
            <p:button id="account" style="margin-right: .5em" value="Account" icon="pi pi-id-card" disabled="false" styleClass="ui-button-secondary" />
            <p:button href="/logout" value="Log out" icon="pi pi-sign-out" styleClass="ui-button-outlined  ui-button-secondary" />
        </p:toolbarGroup>
    </p:toolbar>
    <!-- ===================== MESSAGES OUTPUT ====================== -->
    <p:growl id="messages" showDetail="false" closable="true"  style="width: 80%; margin: auto;">
        <p:autoUpdate/>
    </p:growl>
    <!-- ===================== THERE IS ORDER PART ====================== -->
    <p:panel id="mainPanel" header="Today activities" style="width: 80%; margin: auto;" toggleable="false" collapsed="false" toggleableHeader="true" toggleSpeed="200">

        <h:form id="activitiesForm">
            <p:dataTable id="activitiesDT" reflow="true" rowExpandMode="single" rowHover="true"
                         var="activity" value="#{mainController.getActivities()}"  rowKey="#{activity.id()}"
                         widgetVar="activityList" editable="true">
                <p:ajax event="rowEdit"  update="messages"/>
                <p:column sortBy="#{activity.title()}" headerText="Activity Name">
                    <p:cellEditor>
                        <f:facet name="output">
                            <p:outputLabel value="#{activity.title()}"/></f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{activity.title()}" style="width:100%;" label="Name"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column sortBy="#{activity.weight()}" headerText="Weight">
                    <p:cellEditor>
                        <f:facet name="output">
                            <p:outputLabel value="#{activity.weight()}"/></f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{activity.weight()}" style="width:100%" label="Name"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column sortBy="#{activity.duration()}" headerText="Duration">
                    <p:cellEditor>
                        <f:facet name="output">
                            <p:outputLabel value="#{activity.duration()}"/>
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{activity.duration()}" style="width:100%" label="Name"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Edit" style="width:5rem" >
                    <p:rowEditor editTitle="Edit Row" cancelTitle="Cancel Edit" saveTitle="Save Row" />
                </p:column>
                <p:column headerText="Delete" style="width:4rem">
                    <p:commandButton process="@this" icon="pi pi-trash" styleClass="rounded-button ui-button-warning"
                                      ajax="true" oncomplete="PF('confirmDelDriver').show()">
                    </p:commandButton>
                </p:column>
            </p:dataTable>
        </h:form>
    </p:panel>
</h:body>

</html>

